/*
 * Copyright (C) 2015 Altera Corporation. All rights reserved.
 *
 * This program is free software; you can redistribute it and/or modify
 * it under the terms and conditions of the GNU General Public License,
 * version 2, as published by the Free Software Foundation.
 *
 * This program is distributed in the hope it will be useful, but WITHOUT
 * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or
 * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License for
 * more details.
 *
 * You should have received a copy of the GNU General Public License along with
 * this program.  If not, see <http://www.gnu.org/licenses/>.
 */

/dts-v1/;

/ {
	model = "Altera NiosII Max10";
	compatible = "altr,niosii-max10";
	#address-cells = <1>;
	#size-cells = <1>;

	cpus {
		#address-cells = <1>;
		#size-cells = <0>;

		cpu: cpu@0 {
			device_type = "cpu";
			compatible = "altr,nios2-1.1";
			reg = <0x00000000>;
			interrupt-controller;
			#interrupt-cells = <1>;
			altr,exception-addr = <3221225504>;
			altr,fast-tlb-miss-addr = <3431989504>;
			altr,has-div = <1>;
			altr,has-initda = <1>;
			altr,has-mmu = <1>;
			altr,has-mul = <1>;
			altr,implementation = "fast";
			altr,pid-num-bits = <8>;
			altr,reset-addr = <3355443200>;
			altr,tlb-num-entries = <256>;
			altr,tlb-num-ways = <16>;
			altr,tlb-ptr-sz = <8>;
			clock-frequency = <50000000>;
			dcache-line-size = <32>;
			dcache-size = <16384>;
			icache-line-size = <32>;
			icache-size = <32768>;
		};
	};

	memory {
		device_type = "memory";
		reg = <0x00000000 0x01000000>;
	};

	sopc0: sopc@0 {
		device_type = "soc";
		ranges;
		#address-cells = <1>;
		#size-cells = <1>;
		compatible = "altr,avalon", "simple-bus";
		bus-frequency = <50000000>;

		jtag_uart: serial@0c800010 {
			compatible = "altr,juart-1.0";
			reg = <0x0c800010 0x00000008>;
			interrupt-parent = <&cpu>;
			interrupts = <0>;
		};

		epcq_controller_0: epcq@0c300000 {
			compatible = "altr,quadspi-1.0";
			reg = <0x0c300000 0x00000020>,
				<0x08000000 0x01000000>;
			reg-names = "avl_csr", "avl_mem";
			interrupt-parent = <&cpu>;
			interrupts = <2>;
			#address-cells = <1>;
			#size-cells = <0>;
			flash0: n25q512a@0 {
				compatible = "n25q512a";
				reg = <0>;
				#address-cells = <1>;
				#size-cells = <1>;
				partition@0 {
					/* 10 MB for raw data. */
					label = "Flash 0 Raw Data";
					reg = <0x0 0xa00000>;
				};
				partition@a00000 {
					/* 54 MB for jffs2 data. */
					label = "Flash 1 jffs2 Filesystem";
					reg = <0xa00000 0x3600000>;
				};
			};
		};

		sysid: sysid@0c800000 {
			compatible = "altr,sysid-1.0";
			reg = <0x0c800000 0x00000008>;
			id = <3737780225>;
			timestamp = <1447120173>;
		};

		rgmii_0_eth_tse_0: ethernet@400 {
			compatible = "altr,tse-msgdma-1.0", "altr,tse-1.0";
			reg = <0x0c100000 0x00000400>,
				<0x0c100420 0x00000020>,
				<0x0c100400 0x00000020>,
				<0x0c1004c0 0x00000008>,
				<0x0c100440 0x00000020>,
				<0x0c100460 0x00000020>;
			reg-names = "control_port", "rx_csr", "rx_desc", "rx_resp", "tx_csr", "tx_desc";
			interrupt-parent = <&cpu>;
			interrupts = <4 3>;
			interrupt-names = "rx_irq", "tx_irq";
			rx-fifo-depth = <2048>;
			tx-fifo-depth = <2048>;
			address-bits = <48>;
			max-frame-size = <1518>;
			local-mac-address = [00 00 00 00 00 00];
			altr,has-supplementary-unicast;
			altr,enable-sup-addr = <1>;
			altr,has-hash-multicast-filter;
			altr,enable-hash = <1>;
			phy-mode = "rgmii-id";
			phy-handle = <&phy0>;
			rgmii_0_eth_tse_0_mdio: mdio {
				compatible = "altr,tse-mdio";
				#address-cells = <1>;
				#size-cells = <0>;
				phy0: ethernet-phy@0 {
				reg = <0>;
				device_type = "ethernet-phy";
				};
			};
		};

		enet_pll: clock@0 {
			compatible = "altr,pll-1.0";
			#clock-cells = <1>;

			enet_pll_c0: enet_pll_c0 {
				compatible = "fixed-clock";
				#clock-cells = <0>;
				clock-frequency = <125000000>;
				clock-output-names = "enet_pll-c0";
			};

			enet_pll_c1: enet_pll_c1 {
				compatible = "fixed-clock";
				#clock-cells = <0>;
				clock-frequency = <25000000>;
				clock-output-names = "enet_pll-c1";
			};

			enet_pll_c2: enet_pll_c2 {
				compatible = "fixed-clock";
				#clock-cells = <0>;
				clock-frequency = <2500000>;
				clock-output-names = "enet_pll-c2";
			};
		};

		sys_pll: clock@1 {
			compatible = "altr,pll-1.0";
			#clock-cells = <1>;

			sys_pll_c0: sys_pll_c0 {
				compatible = "fixed-clock";
				#clock-cells = <0>;
				clock-frequency = <100000000>;
				clock-output-names = "sys_pll-c0";
			};

			sys_pll_c1: sys_pll_c1 {
				compatible = "fixed-clock";
				#clock-cells = <0>;
				clock-frequency = <50000000>;
				clock-output-names = "sys_pll-c1";
			};

			sys_pll_c2: sys_pll_c2 {
				compatible = "fixed-clock";
				#clock-cells = <0>;
				clock-frequency = <75000000>;
				clock-output-names = "sys_pll-c2";
			};
		};

		sys_clk_timer: timer@0c800040 {
			compatible = "altr,timer-1.0";
			reg = <0x0c800040 0x00000020>;
			interrupt-parent = <&cpu>;
			interrupts = <1>;
			clock-frequency = <50000000>;
		};

		led_pio: gpio@0c800020 {
			compatible = "altr,pio-1.0";
			reg = <0x0c800020 0x00000010>;
			altr,gpio-bank-width = <4>;
			resetvalue = <0>;
			#gpio-cells = <2>;
			gpio-controller;
		};

		button_pio: gpio@0c800030 {
			compatible = "altr,pio-1.0";
			reg = <0x0c800030 0x00000010>;
			interrupt-parent = <&cpu>;
			interrupts = <6>;
			altr,gpio-bank-width = <3>;
			altr,interrupt_type = <2>;
			edge_type = <1>;
			level_trigger = <0>;
			resetvalue = <0>;
			#gpio-cells = <2>;
			gpio-controller;
		};

		sys_clk_timer_1: timer@c400000 {
			compatible = "altr,timer-1.0";
			reg = <0x0c400000 0x00000020>;
			interrupt-parent = <&cpu>;
			interrupts = <5>;
			clock-frequency = <50000000>;
		};

		fpga_leds: leds {
			compatible = "gpio-leds";

			led_fpga0: fpga0 {
				label = "fpga_led0";
				gpios = <&led_pio 0 1>;
			};

			led_fpga1: fpga1 {
				label = "fpga_led1";
				gpios = <&led_pio 1 1>;
			};

			led_fpga2: fpga2 {
				label = "fpga_led2";
				gpios = <&led_pio 2 1>;
			};

			led_fpga3: fpga3 {
				label = "fpga_led3";
				gpios = <&led_pio 3 1>;
			};
		};
	};

	chosen {
		bootargs = "debug console=ttyJ0,115200 root=/dev/mtdblock1 rw rootfstype=jffs2";
	};
};

